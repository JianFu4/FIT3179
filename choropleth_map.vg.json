{
    "$schema": "https://vega.github.io/schema/vega-lite/v5.json",
    "title": "Primary energy consumption per capita(kWh/person) (2000-2020)",
    "width": 1200,
    "height": 500,
    "projection": {"type":"equalEarth"},

    "params": [
      {
        "name": "Year_selection",
        "value": 2020,
        "bind": {
        "input": "range",
        "min": 2000,
        "max": 2020,
        "step": 1,
        "name": "Year: "
      }
     }
    ],
    "layer":[
      {
        "data": {
      "url": "https://raw.githubusercontent.com/JiazhouLiu/FIT3179/main/VegaLite/3_choropleth_map/js/ne_110m_admin_0_countries.topojson",
      "format": {"type": "topojson", "feature": "ne_110m_admin_0_countries"}
    },
    "transform": [
      {
        "lookup": "properties.NAME",
        "from":{
          "data":{
            "url": "https://raw.githubusercontent.com/JianFu4/FIT3179/main/data/merged_data_map.csv"
          },
          "key": "Entity",
          "fields": ["Category"]

        }
      }
    ],
    "mark": {"type": "geoshape", "fill": "lightgray", "stroke": "white"}
      },
      {
        "data": {
          "url": "https://raw.githubusercontent.com/FIT3179/Vega-Lite/main/2_symbol_map/js/WorldMapWithGraticules.topojson",
          "format": {"type": "topojson", "feature": "ne_110m_graticules_30"}
        },
        "mark": {"type": "geoshape", "fill": null, "stroke": "lightgray"}
      },
      {
        "data" : {
          "url": "https://raw.githubusercontent.com/FIT3179/Vega-Lite/main/7_others/oceans.topojson",
          "format":{"type": "topojson","feature": "oceans"}
        },
        "mark":{"type": "geoshape","fill":"skyblue"}
      },
      {
        "data" : {
          "url": "https://raw.githubusercontent.com/JianFu4/FIT3179/main/data/merged_data_map.csv" 
        },
        
        "transform": [
          {
            "lookup": "Region",
            "from":{
              "data":{
                "url":  "https://raw.githubusercontent.com/JiazhouLiu/FIT3179/main/VegaLite/3_choropleth_map/js/ne_110m_admin_0_countries.topojson",
                "format":{
                  "type": "topojson",
                  "feature": "ne_110m_admin_0_countries"
                }
              },
              "key": "properties.name"
            },
            "as": "geo"
          },
          {"filter" : "datum.Year == Year_selection"}
        
        ],
          "mark": {"type": "geoshape"},
          "encoding" : {
            "shape" : { "field" : "geo", "type": "geojson"
          },
          "color" : {
            "field" : "Category",
            "type": "nominal"
          },
          "tooltip" : [
            {
              "field": "Entity",
              "type": "nominal",
              "title": "Country"
            },
            {
              "field": "Primary energy consumption per capita (kWh/person)",
              "type": "quantitative",
              "title": "Energy Consumption (kWh/person)"
            },
            {
              "field": "Category",
              "type": "nominal",
              "title": "Category"

            }

          ]
        }},
      {
        "mark": {
          "type": "text",
          "align" : "left",
          "baseline" : "middle",
          "dx" : 350,
          "dy": 100,
          "fontSize" : 12
        },
        "encoding":{
          "text": { "value" : "Australia"},
          "color" : { "value": "black"}
        }
      }]
        
}