{
  "$schema": "https://vega.github.io/schema/vega-lite/v5.json",
  "description": "An interactive scatter plot of electricity consumption against CO2 emissions by Region and year.",
  "data": {
    "url": "https://raw.githubusercontent.com/JianFu4/FIT3179/main/data/merged_data_scatter.csv"
  },
  "hconcat": [{
      "width": 500,
      "height": 400,
      "layer": [{
          "transform": [
              {"filter": {"field": "Region", "equal": "Afghanistan"}},
              {"filter": {"param": "year"}}
          ],
          "mark": {
              "type": "text",
              "fontSize": 100,
              "x": 250,
              "y": 200,
              "opacity": 0.1
          },
          "encoding": {"text": {"field": "year"}}
      }],
      "title": {
          "text": "Electricity Consumption Against CO2 Emissions Trend for Each Continent Across Years",
          "font": "Roboto"
      },
      "encoding": {
          "x": {
              "field": "Electricity from fossil fuels (TWh)",
              "type": "quantitative",
              "axis": {"tickCount": 5, "title": "Electricity from fossil fuels (TWh)", "titleFont": "Roboto", "labelFont": "Roboto"}
          },
          "y": {
              "field": "Value_co2_emissions_kt_by_country",
              "type": "quantitative",
              "axis": {"tickCount": 5, "title": "CO2 Emissions (kt)", "titleFont": "Roboto", "labelFont": "Roboto"}
          }
      },
      "layer": [{
          "mark": {
              "type": "line",
              "size": 4,
              "color": "lightgray",
              "strokeCap": "round"
          },
          "encoding": {
              "detail": {"field": "Region"},
              "order": {"field": "year"},
              "opacity": {
                  "condition": {
                      "test": {"or": [
                          {"param": "hovered", "empty": false},
                          {"param": "clicked", "empty": false}
                      ]},
                      "value": 0.8
                  },
                  "value": 0
              }
          }
      }, {
          "params": [{
              "name": "year",
              "value": [{"year": 2000}],
              "select": {
                  "type": "point",
                  "fields": ["year"]
              },
              "bind": {
                  "name": "Year",
                  "input": "range",
                  "min": 2000,
                  "max": 2019,
                  "step": 1
              }
          },
          {
            "name": "hovered",
            "select": {
              "type": "point",
              "fields": ["Region"],
              "toggle": false,
              "on": "mouseover"
            }
          },
          {
            "name": "clicked",
            "select": {"type": "point", "fields": ["Region"]}
          }
        

        ],
          "transform": [{"filter": {"param": "year"}}],
          "mark": {"type": "circle", "size": 125, "opacity": 0.7},
          "encoding": {
              "color": {
                  "field": "Continent",
                  "title": "Continent",
                  "legend": {
                      "titleFont": "Roboto",
                      "titleFontSize": 15,
                      "labelFont": "Roboto",
                      "labelFontSize": 12
                  },
                  "scale": {"scheme": "tableau10"}
              }}
            },{
              "transform": [
                
                {
                  "filter": {
                    "and": [
                      {"param": "year"},
                      {"or": [
                        {"param": "hovered", "empty": false}
                      ]}
                    ]
                  }
                }
              ],
              "params": [{
                "name": "zoom",
                "select": "interval",
                "bind": "scales"
              }],
              "mark": {
                "type": "text",
                "yOffset": -12,
                "fontSize": 12,
                "fontWeight": "bold"
              },
              "encoding": {
                "text": {"field": "Region"},
                "color": {"field": "Continent", "title": "Continent"}
              }
            },
            {
              "transform": [
                {"filter": {"param": "hovered", "empty": false}},
                {"filter": {"not": {"param": "year"}}}
              ],
              "layer": [
                {
                  "mark": {
                    "type": "text",
                    "yOffset": -12,
                    "fontSize": 12,
                    "color": "gray"
                  },
                  "encoding": {"text": {"field": "year"}}
                },
                {"mark": {"type": "circle", "color": "gray"}}
              ]
            }
          ]
        }
      ]}
             
