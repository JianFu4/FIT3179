{
    "$schema": "https://vega.github.io/schema/vega-lite/v5.json",
    "params": [
        {
        "name": "Year_selection",
        "value": 2020,
        "bind": {
        "input": "range",
        "min": 2000,
        "max": 2020,
        "step": 1,
        "name": "Year: "
        }}
    ],
    "vconcat":[
        {
            "data": {
                "url": "https://raw.githubusercontent.com/JianFu4/FIT3179/main/data/merged_dataset.csv"
              },
              "width":600,
              "height":200,
              
              "transform": [
                {
                  "filter": "datum.Year == Year_selection"    
                },
                {
                  "aggregate": [
                    {"op": "sum", "field": "Electricity from fossil fuels (TWh)", "as": "Fossil Fuels"},
                    {"op": "sum", "field": "Electricity from nuclear (TWh)", "as": "Nuclear"},
                    {"op": "sum", "field": "Electricity from renewables (TWh)", "as": "Renewables"}
                  ],
                  "groupby": ["Year"]
                },
                {
                  "fold": ["Fossil Fuels", "Nuclear", "Renewables"],
                  "as": ["Source", "Value"]
                }
              ],
              "encoding": {
                "theta": {"field": "Value", "type": "quantitative"},
                "color": {"field": "Source", "type": "nominal"},
                "text": {"field": "Source", "type": "nominal"},
                "tooltip": [
                  {"field": "Value", "title": "Percentage"},
                  {"field": "Source", "title": "Source"}
                ]
              },
              "layer": [
                {
                  "mark": {"type": "arc", "innerRadius": 0}
                },
                {
                  "mark": {"type": "text", "radius": 55,"align":"right","baseline":"middle"}
                }
              ]

        },
        {
            "hconcat" : [{
                "data": {
                    "url": "https://raw.githubusercontent.com/JianFu4/FIT3179/main/data/merged_dataset.csv"
                  },
                  "width":150,
                  "height":150,
                  "transform": [
                    {
                        "filter": "datum.Year == Year_selection"
                    },
                    {
                
                      "aggregate": [
                        {"op": "sum", "field": "Electricity from renewables (TWh)", "as": "Renewables"}
                      ],
                      "groupby": ["region"]
                    }
                  ],
                  "mark": {"type": "arc", "innerRadius": 40},
                  "encoding": {
                    "theta": {"field": "Renewables", "type": "quantitative"},
                    "color": {"field": "region", "type": "nominal"},
                    "tooltip": [
                        {"field": "Renewable", "title": "Electricity from renewables (TWh)"},
                        {"field": "region", "title": "Region"}
                      ]
                  }

            },
        {
            "data": {
                "url": "https://raw.githubusercontent.com/JianFu4/FIT3179/main/data/merged_dataset.csv"
              },
              "width":150,
                "height":150,
              "transform": [
                {
                    "filter": "datum.Year == Year_selection"
                },
                {
                  "aggregate": [
                    {"op": "sum", "field": "Electricity from nuclear (TWh)", "as": "Nuclear"}
                  ],
                  "groupby": ["region"]
                }
              ],
              "mark": {"type": "arc", "innerRadius": 40},
              "encoding": {
                "theta": {"field": "Nuclear", "type": "quantitative"},
                "color": {"field": "region", "type": "nominal"},
                "tooltip": [
                    {"field": "Nuclear", "title": "Electricity from nuclear (TWh)"},
                    {"field": "region", "title": "Region"}
                  ]
              }
        },
    {
        "data": {
            "url": "https://raw.githubusercontent.com/JianFu4/FIT3179/main/data/merged_dataset.csv"
          },
          "width":150,
                "height":150,
          "transform": [
            {
                "filter": "datum.Year == Year_selection"
            },
            {
              "aggregate": [
                {"op": "sum", "field": "Electricity from fossil fuels (TWh)", "as": "Fossil Fuels"}
              ],
              "groupby": ["region"]
            }
          ],
          "mark": {"type": "arc", "innerRadius": 40},
          "encoding": {
            "theta": {"field": "Fossil Fuels", "type": "quantitative"},
            "color": {"field": "region", "type": "nominal"},
            "tooltip": [
                {"field": "Fossil Fuels", "title": "Electricity from fossil fuels (TWh)"},
                {"field": "region", "title": "Region"}
              ]
          }

    }]
            

        }
    ]
    
  }
  
  